<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="{{ asset('css/css_pastry.css') }}">
    <title>Menu</title>
</head>

<body>
    <section class="types">
        <div id="cake">
            <h2><span>C</span>akes</h2>
        </div>

        <div class="product">
            <div class="imag">
                <div class="im">
                    <img src="https://i.pinimg.com/736x/78/6a/98/786a98a1ce4c670495d60f2de624b768.jpg" alt="">
                </div>
                <div>
                    <h3 class="text">Chocolate cake</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://i.pinimg.com/736x/ad/ee/9a/adee9a08ba49a7b0b62549bcde3b0e05--strawberry-cakes-strawberry-cake-decorations.jpg" alt="">
                </div>
                <div>
                    <h3 class="text">Strawberry cake</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://www.kilometre-0.fr/wp-content/uploads/2019/12/20191222Cuisine_mart200.jpg" alt="">
                </div>
                <div>
                    <h3 class="text">Orange cake</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>
        </div>
    </section>

    <section class="types">
        <div id="dessert">
            <h2><span>F</span>rozen <span>D</span>esserts</h2>
        </div>

        <div class="product">
            <div class="imag">
                <div class="im">
                    <img src="https://cdn.tasteatlas.com//images/dishes/723964d6c2f44e9ba35d0cdcb5480438.jpg?w=905&h=510" alt="">
                </div>
                <div>
                    <h3 class="text">Tartufo</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://cdn.tasteatlas.com//Images/Dishes/3c8f9cf5917b43cda4b8b200f6391aa1.jpg?w=905&h=510" alt="">
                </div>
                <div>
                    <h3 class="text">Spumoni</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://cdn.tasteatlas.com//images/dishes/4f3d4d079fce4c2ebda620d8717ae358.jpg?w=905&h=510" alt="">
                </div>
                <div>
                    <h3 class="text">Kulfi</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>
        </div>
    </section>

    <section class="types">
        <div id="category">
            <h2><span>O</span>ther categories</h2>
        </div>

        <div class="product">
            <div class="imag">
                <div class="im">
                    <img src="https://eastcoastbakehouse.com/wp-content/uploads/2016/09/14719736_524500451076234_6152375583041912832_n.jpg" alt="">
                </div>
                <div>
                    <h3 class="text">Cookies</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://th.bing.com/th/id/OIP.SMAdp4JwR32ijtAqblH0cwHaE7?pid=ImgDet&rs=1" alt="">
                </div>
                <div>
                    <h3 class="text">Cupcakes</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://th.bing.com/th/id/R.ea71801d7eeb130167612321867d2698?rik=6ZWN6owDe7RMlg&riu=http%3a%2f%2fhdwpro.com%2fwp-content%2fuploads%2f2018%2f02%2fSuper-Doughnut.jpg&ehk=cOoyL4im9TALb7LAxljfqc05GA5JGCGZVTACos4mxOo%3d&risl=&pid=ImgRaw&r=0" alt="">
                </div>
                <div>
                    <h3 class="text">Donuts</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://th.bing.com/th/id/R.668a6aa39078f1a5c1f5298f30b12e72?rik=lsRh%2bNSt4QiPWQ&riu=http%3a%2f%2fwww.baltana.com%2ffiles%2fwallpapers-3%2fDark-Chocolate-Wallpaper-HD-12605.jpg&ehk=KXRqi2EsfO0d6VHbrx2hvS3OJJwxo8jirMIa1tkl8Aw%3d&risl=&pid=ImgRaw&r=0" alt="">
                </div>
                <div>
                    <h3 class="text">Dark chocolate</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://th.bing.com/th/id/OIP.nVl7ohsX0v6eC0jYwY3nfAHaHa?pid=ImgDet&rs=1" alt="">
                </div>
                <div>
                    <h3 class="text">Pancakes</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://th.bing.com/th/id/OIP.ETDr51KxyQwV6Op8Jzk3owHaFj?pid=ImgDet&rs=1" alt="">
                </div>
                <div>
                    <h3 class="text">Sweets</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://i.pinimg.com/originals/e9/ea/d5/e9ead5a1abe4dc4405ddc31b689de581.jpg" alt="">
                </div>
                <div>
                    <h3 class="text">Waffles</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>

            <div class="imag">
                <div class="im">
                    <img src="https://static-communitytable.parade.com/wp-content/uploads/2015/05/creative-brownies-featured.jpg" alt="">
                </div>
                <div>
                    <h3 class="text">Brownies</h3>
                    <h3>Price:5$</h3>
                    <button class="order-btn" data-product="Chocolate Cake" data-price="5">Order Now</button>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div>
            <a href="{{ path('home_page') }}" class="btn1">Back to Home page</a>
            <a href="{{ path('confirmation_page', {'total': 0, 'products': ''}) }}" id="confirmBtn" class="btn1">Confirm</a>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const orderButtons = document.querySelectorAll('.order-btn');
            const confirmButton = document.getElementById('confirmBtn');
            let totalBudget = 0;
            let selectedProducts = [];

            orderButtons.forEach(function (button) {
                button.addEventListener('click', function () {
                    const price = 5;
                    const productName = button.parentElement.querySelector('.text').innerText;
                    addToCart(productName, price);
                });
            });

            function addToCart(productName, price) {
                totalBudget += price;
                selectedProducts.push({ name: productName, price: price });
                updateConfirmButton();
                alert(`Produit ajouté au panier:\nNom: ${productName}\nPrix: $${price}`);
            }

            function updateConfirmButton() {
                if (totalBudget > 0) {
                    confirmButton.href = `{{ path('confirmation_page', {'total': totalBudget, 'products': selectedProducts|json_encode}) }}`;
                } else {
                    confirmButton.href = ""; // Set an empty href when no order is made
                    confirmButton.addEventListener('click', function (event) {
                        event.preventDefault();
                        alert("Vous n'avez pas effectué de commande.");
                    });
                }
            }
        });
    </script>
</body>

</html>
